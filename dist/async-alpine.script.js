var d=(t,e)=>[...t.attributes].map(i=>i.name).filter(i=>{for(let r of e.alpine.attributes)if(i.startsWith(r))return!0;return!1}).filter(i=>i!==`${e.alpine.prefix}cloak`),f=(t,e)=>{for(let i of t.attributes)t.node.setAttribute(e.prefix+i,t.node.getAttribute(i)),t.node.removeAttribute(i)},u=(t,e)=>{for(let i of t.attributes)t.node.setAttribute(i,t.node.getAttribute(e.prefix+i)),t.node.removeAttribute(e.prefix+i)};var b=class{constructor(t,e,i){this.config=e,this.status="unloaded",this.src=t.getAttribute(e.src),this.strategy=t.getAttribute(e.root)||e.defaultStrategy,this.name=t.getAttribute(`${e.alpine.prefix}data`).split("(")[0],this.id=t.id||e.prefix+i,this.root={node:t,attributes:d(t,this.config)},t.setAttribute(e.id,this.id),this.children=[...t.querySelectorAll("*")].filter(r=>d(r,this.config).length).filter(r=>!r.hasAttribute(e.root)).filter(r=>r.closest(`[${e.root}]`)===t).map(r=>({node:r,attributes:d(r,this.config)}))}deactivate(){f(this.root,this.config);for(let t of this.children)f(t,this.config)}async download(t){this.status="loading";let e=await import(this.src),i=e[this.name]||e.default||Object.values(e)[0]||!1;!i||(t.data(this.name,i),this.activate())}activate(){u(this.root,this.config);for(let t of this.children)u(t,this.config);this.root.node.removeAttribute(`${this.config.prefix}cloak`);for(let t of this.children)t.node.removeAttribute(`${this.config.prefix}cloak`);this.status="loaded"}};var g=t=>new Promise(e=>{window.addEventListener("async-alpine:load",i=>{i.detail.id===t.id&&t.status==="unloaded"&&e()})}),c=g;var A=()=>new Promise(t=>{"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,200)}),p=A;var v=(t,e)=>new Promise(i=>{let r=e.indexOf("("),s=e.slice(r),n=window.matchMedia(s);n.matches?i():n.addEventListener("change",i,{once:!0})}),m=v;var w=(t,e)=>new Promise(i=>{let r="0px 0px 0px 0px";if(e.indexOf("(")!==-1){let n=e.indexOf("(")+1;r=e.slice(n,-1)}let s=new IntersectionObserver(n=>{n[0].isIntersecting&&(s.disconnect(),i())},{rootMargin:r});s.observe(t.root.node)}),h=w;var y={prefix:"ax-",root:"ax-load",src:"ax-load-src",id:"ax-id",defaultStrategy:"immediate",alpine:{prefix:"x-",attributes:["x-",":","@"]}},l=y;var j=1,x=(t,e={})=>{let i=document.querySelectorAll(`[${l.root}]`);if(!!i){e.prefix&&(l.alpine.prefix=e.prefix,l.alpine.attributes.push(e.prefix));for(let r of i){let s=new b(r,l,j++);s.deactivate();let n=s.strategy.split("|").map(o=>o.trim()).filter(o=>o!=="immediate").filter(o=>o!=="eager");if(!n.length){s.download(t);continue}let a=[];for(let o of n){if(o==="idle"){a.push(p());continue}if(o.startsWith("visible")){a.push(h(s,o));continue}if(o.startsWith("media")){a.push(m(s,o));continue}o==="event"&&a.push(c(s))}Promise.all(a).then(()=>{s.download(t)})}}};document.addEventListener("alpine:init",()=>{x(Alpine)});
